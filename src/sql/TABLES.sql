-- USUARIO
CREATE TABLE USUARIO (
    ID NUMBER NOT NULL,
    NOME_COMPLETO VARCHAR2(200) NOT NULL,
    EMAIL VARCHAR2(200) NOT NULL,
    LOGIN VARCHAR2(200) NOT NULL,
    SENHA VARCHAR2(150) NOT NULL,
    DATA_INCLUSAO DATE NOT NULL,
    PERFIL NUMBER NOT NULL
);

CREATE TABLE CURSO (
    ID NUMBER NOT NULL,
    TITULO VARCHAR2(200),
    DATA DATE NOT NULL,
    DESCRICAO VARCHAR2(500) NOT NULL,
    ID_PROFESSOR NUMBER NOT NULL
);

CREATE TABLE AULA (
    ID NUMBER NOT NULL,
    DESCRICAO  VARCHAR2(500) NOT NULL,
    ID_CURSO NUMBER NOT NULL
);

--Daqui pra cima refatorado dia 28/06/2025;

-- MATRICULA
CREATE TABLE MATRICULA (
    ID NUMBER NOT NULL,
    ID_USUARIO NUMBER,
    ID_CURSO NUMBER NOT NULL,
    DATA_MATRICULA DATE NOT NULL
);

CREATE TABLE AULA (
    ID NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    TITULO VARCHAR2(255) NOT NULL,
    DESCRICAO CLOB NOT NULL,
    URL_CONTEUDO VARCHAR2(500) NOT NULL,
    CURSO_ID NUMBER NOT NULL,
    PROFESSOR_ID NUMBER NOT NULL
);

CREATE TABLE ARQUIVO (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(200 CHAR) NOT NULL,
    CAMINHO VARCHAR2(200 CHAR) NOT NULL,
    TIPO VARCHAR2(20 CHAR) NOT NULL,
    TAMANHO NUMBER NOT NULL,
    DATA_UPLOAD DATE NOT NULL
);


ALTER TABLE MATRICULA
ADD CONSTRAINT FK_MATRICULA_USUARIO
FOREIGN KEY (ID_USUARIO)
REFERENCES USUARIO(ID);

ALTER TABLE MATRICULA
ADD CONSTRAINT FK_MATRICULA_CURSO
FOREIGN KEY (ID_CURSO)
REFERENCES CURSO(ID);

-- Relacionamento com a tabela CURSO
ALTER TABLE AULA
ADD CONSTRAINT FK_AULA_CURSO
FOREIGN KEY (CURSO_ID)
REFERENCES CURSO(ID);

-- Relacionamento com a tabela USUARIO (professor)
ALTER TABLE AULA
ADD CONSTRAINT FK_AULA_PROFESSOR
FOREIGN KEY (PROFESSOR_ID)
REFERENCES USUARIO(ID);

ALTER TABLE AULA ADD URL_VIDEO VARCHAR2(500);

ALTER TABLE AULA ADD URL_VIDEO VARCHAR2(500);

ALTER TABLE CURSO ADD URL_PDF VARCHAR2(255);

ALTER TABLE curso ADD url_video VARCHAR2(255);--

ALTER TABLE USUARIO DROP COLUMN perfil;

ALTER TABLE USUARIO ADD (perfil NUMBER);

ALTER TABLE USUARIO DROP COLUMN TIPO_USUARIO;

ALTER TABLE CURSO ADD LISTA VARCHAR2(255);

